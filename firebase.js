import{initializeApp}from"https://www.gstatic.com/firebasejs/11.4.0/firebase-app.js";import{getAuth,onAuthStateChanged,signInWithPopup,GoogleAuthProvider}from"https://www.gstatic.com/firebasejs/11.4.0/firebase-auth.js";import{getFirestore,serverTimestamp,Timestamp,collection,doc,addDoc,setDoc,getDocs,getDoc,updateDoc,deleteDoc,writeBatch,deleteField,FieldPath,query,where,documentId,orderBy,startAt,endBefore,limit,getCountFromServer}from"https://www.gstatic.com/firebasejs/11.4.0/firebase-firestore.js";import{getDatabase,ref,get,set,push,onValue,onChildChanged,onChildAdded,serverTimestamp as rtdbTimestamp}from"https://www.gstatic.com/firebasejs/11.4.0/firebase-database.js";const firebaseConfig={apiKey:"AIzaSyDnWzH0BBCtxWSRK0VHb3GZT7gx1vxMwc0",authDomain:"lecturedot-a4222.firebaseapp.com",projectId:"lecturedot-a4222",storageBucket:"lecturedot-a4222.firebasestorage.app",messagingSenderId:"225073159992",appId:"1:225073159992:web:cea0dbbf5c484b36556bcd",measurementId:"G-PX1NMT4EDL"},app=initializeApp(firebaseConfig),provider=new GoogleAuthProvider;export const auth=getAuth();export const onAuth=r=>onAuthStateChanged(auth,r);export function signIn(){signInWithPopup(auth,provider).then((r=>{GoogleAuthProvider.credentialFromResult(r).accessToken,r.user})).catch((r=>{r.code,r.message,r.customData.email,GoogleAuthProvider.credentialFromError(r)}))}const DATABASE=getFirestore(app);export const db={};db.serverTimestamp=serverTimestamp,db.Timestamp=Timestamp,db.now=()=>Timestamp.now().seconds,db.orderBy=orderBy,db.where=where,db.startsWith=(r,e)=>[where(r,">=",e),where(r,"<",e+"ï£¿")],db.getDoc=async function(r,e){if(!navigator.onLine)return{error:"You are offline."};try{var o=await getDoc(doc(DATABASE,r,e));return o.exists()?o.data():null}catch(r){return console.error(r),{error:r.code||"unknown error"}}},db.insertOne=async function(r,e,o){if(!navigator.onLine)return{error:"You are offline."};try{if(e){await setDoc(doc(DATABASE,r,e),o);return e}return(await addDoc(collection(DATABASE,r),o)).id}catch(r){return console.error(r),{error:r.code||"unknown error"}}},db.updateOne=async function(r,e,o,...t){if(!navigator.onLine)return{error:"You are offline."};try{return t.length?await updateDoc(doc(DATABASE,r,e),o,...t):await updateDoc(doc(DATABASE,r,e),o),!0}catch(r){return console.error(r),{error:r.code||"unknown error"}}},db.deleteOne=async function(r,e){if(!navigator.onLine)return{error:"You are offline."};try{await deleteDoc(doc(DATABASE,r,e))}catch(r){return console.error(r),{error:r.code||"unknown error"}}},db.find=async function(r,...e){if(!navigator.onLine)return{error:"You are offline."};try{if(e?.length)var o=await getDocs(query(collection(DATABASE,r),...e));else o=await getDocs(collection(DATABASE,r));let t={};return o.docs.forEach((r=>t[r.id]=r.data())),t}catch(r){return console.error(r),{error:r.code||"unknown error"}}};const rtDB=getDatabase();export const dbr={};dbr.timestamp=rtdbTimestamp,dbr.get=async function(r){if(!navigator.onLine)return{error:"You are offline."};try{return await get(ref(rtDB,r))}catch(r){return console.error(r),{error:r.code||"unknown error"}}},dbr.write=async function(r,e){if(!navigator.onLine)return{error:"You are offline."};try{return await set(ref(rtDB,r),e)}catch(r){return console.error(r),{error:r.code||"unknown error"}}},dbr.push=async function(r,e){if(!navigator.onLine)return{error:"You are offline."};try{return await set(push(ref(rtDB,r)),e)}catch(r){return console.error(r),{error:r.code||"unknown error"}}},dbr.onValue=function(r,e){if(!navigator.onLine)return{error:"You are offline."};try{return onValue(ref(rtDB,r),(r=>{e(r?.val())}))}catch(r){return console.error(r),{error:r.code||"unknown error"}}},dbr.onChildChanged=function(r,e){if(!navigator.onLine)return{error:"You are offline."};try{return onChildChanged(ref(rtDB,r),(r=>{e(r?.val())}))}catch(r){return console.error(r),{error:r.code||"unknown error"}}},dbr.onChildAdded=function(r,e){if(!navigator.onLine)return{error:"You are offline."};try{return onChildAdded(ref(rtDB,r),(r=>{e(r?.key,r?.val())}))}catch(r){return console.error(r),{error:r.code||"unknown error"}}};