export function sleep(e){return new Promise((t=>setTimeout(t,e)))}export const isBool=e=>e?.constructor===Boolean;export const isNum=e=>e?.constructor===Number&&!isNaN(e);export const isStr=e=>e?.constructor===String;export const isObj=e=>e?.constructor===Object;export const isArr=e=>e?.constructor===Array;export const isElement=e=>e instanceof HTMLElement;export const arrSum=e=>e.reduce(((e,t)=>e+(isNum(t)?t:0)),0);export function arrMean(e){Array.isArray(e)||(e=[e]);return(e=e.filter((e=>isNum(e)))).reduce(((e,t)=>e+t),0)/e.length}export function arrStderr(e){Array.isArray(e)||(e=[e]);const t=arrMean(e=e.filter((e=>isNum(e)))),r=e.map((e=>Math.pow(e-t,2))),n=arrSum(r)/e.length;return Math.sqrt(n)/Math.sqrt(e.length)}export function groupAndSummarize(e,t){const{groupBy:r,valuesField:n,labelField:o,sortBy:s}=t,a=s?e.slice().sort(((e,t)=>parseInt(e[s]?.replace(/\D/g,""),10)-parseInt(t[s]?.replace(/\D/g,""),10))):e,i={};a.forEach(((e,t)=>{const s=e[r];if(void 0===s)return;void 0===i[s]&&(i[s]={values:[],labels:[]});const a=e[n],c=o?e[o]:[l?.[t]];Array.isArray(a)?i[s].values.push(...a.filter((e=>null!=e))):null!=a&&i[s].values.push(a),c&&i[s].labels.push(...Array.isArray(c)?c.filter((e=>null!=e)):[c])}));var l=Object.keys(i),c=(e=l.map((e=>i[e].values)),l.map((e=>i[e].labels)));return{labels:l,data:e,content:c}}export function arrayToCsv(e){if(!Array.isArray(e)||0===e.length)return"";return e.map((e=>{Array.isArray(e)||(e=[e]);return e.map((e=>"string"==typeof e?`"${e.replace(/"/g,'""')}"`:"number"==typeof e||"boolean"==typeof e?e.toString():null==e?"":`"${JSON.stringify(e).replace(/"/g,'""')}"`)).join(",")})).join("\n")}export function shuffled(e){return e.map((e=>({r:e,sort:Math.random()}))).sort(((e,t)=>e.sort-t.sort)).map((({r:e})=>e))}export function randInt(e){return Math.floor(Math.random()*e)}export function removeUndefined(e){for(let t in e)void 0===e[t]&&delete e[t]}export function shallowEquals(e,t,r=[]){const n=Object.keys(e).filter((e=>!r.includes(e))),o=Object.keys(t).filter((e=>!r.includes(e)));if(n.length!==o.length)return!1;for(let r of n){let n=e[r];if("object"==typeof n){if(JSON.stringify(n)!==JSON.stringify(t[r]))return!1}else if(n!==t[r])return!1}return!0}export function pad0(e,t=2){return e.toString().padStart(t,"0")}export function getDateTime(e,t,r,n="-",o=":"){let s;s=e?new Date(e):new Date;let a=s.getFullYear()+n+pad0(s.getMonth()+1)+n+pad0(s.getDate()),i=pad0(s.getHours())+o+pad0(s.getMinutes());return r&&(i+=o+pad0(s.getSeconds())),t?a+t+i:[a,i]}export function showMinutes(e){let t=Math.floor(e/1e3);return`${Math.floor(t/60)}:${String(t%60).padStart(2,"0")}`}export function detectBrowser(){const e=navigator.userAgent;return/Opera|OPR/.test(e)?"Opera":/Edg/.test(e)?"Edge":/Chrome/.test(e)?"Chrome":/Safari/.test(e)?"Safari":/Firefox/.test(e)?"Firefox":/MSIE|Trident/.test(e)?"IE":"Unknown"}export const getEl=document.getElementById.bind(document);export function download(e,t){var r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),r.setAttribute("download",e),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}export const isDisplayed=e=>e?.offsetParent||document.body.contains(e);export const show=e=>e.classList.remove("hidden");export const hide=e=>e.classList.add("hidden");export const hideToggle=e=>e.classList.toggle("hidden");export function newEl(e={},t,r){isStr(e)?e={innerHTML:e}:isArr(e)&&(e={items:e});const n=document.createElement(e.tag||"div");let o=!1;if(delete e.tag,e.items&&(e.items.forEach((e=>{isElement(e)?n.appendChild(e):isArr(e)?newEl({items:e},n):isStr(e)?span({innerHTML:e},n):newEl(e,n)})),delete e.items),e.events){for(let t in e.events)n.addEventListener(t,e.events[t]),"click"!=t&&"mousedown"!=t||(o=!0);delete e.events}if(e.style){for(let t in e.style)n.style[t]=e.style[t];delete e.style}for(let t in e)void 0!==n[t]?n[t]=e[t]:n.setAttribute(t,e[t]),"onclick"!=t&&"onmousedown"!=t||(o=!0);return o&&n.classList.add("clickable"),t&&(r?t.prepend(n):t.appendChild(n)),n}export function span(e={},t){return isStr(e)&&(e={innerHTML:e}),e.tag="span",newEl(e,t)}export function button(e={},t){return isStr(e)&&(e={innerHTML:e}),e.tag="button",e.type="button",newEl(e,t)}export function input(e={},t){isStr(e)&&(e={htmlBefore:e});var r={tag:"label"};e.labelClass&&(r.class=e.labelClass),e.labelStyle&&(r.style=e.labelStyle);const n=newEl(r,t);e.tag="input";const o=e.htmlBefore,s=e.htmlAfter;return delete e.labelClass,delete e.labelStyle,delete e.htmlBefore,delete e.htmlAfter,o&&(n.spanBefore=n.appendChild(span({innerHTML:o}))),n.input=n.appendChild(newEl(e)),s&&(n.spanAfter=n.appendChild(span({innerHTML:s}))),n}export function currentUrlWithParams(e){let t=new URL(window.location);t.hash=t.search="";for(let r in e)t.searchParams.append(r,e[r]);return t.href}export function copyToClipboard(e){navigator.clipboard.writeText(e)}export function spinOnce(e){e.style.animation="",e.offsetWidth,e.style.animation="spin 0.5s",setTimeout((()=>e.style.animation=""),500)}export function importStyleSheet(e,t){t&&(e=new URL(e,t).href);const r=document.createElement("link");r.rel="stylesheet",r.href=e,document.head.appendChild(r)}export function addToStyleSheet(e){const t=document.createElement("style");t.textContent=e,document.head.appendChild(t)}importStyleSheet("./common.css",import.meta.url);