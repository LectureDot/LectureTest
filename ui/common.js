import styles from"./common.css"with{type:"css"};document.adoptedStyleSheets.push(styles);export function sleep(e){return new Promise((t=>setTimeout(t,e)))}export const isBool=e=>e?.constructor===Boolean;export const isNum=e=>e?.constructor===Number&&!isNaN(e);export const isStr=e=>e?.constructor===String;export const isObj=e=>e?.constructor===Object;export const isArr=e=>e?.constructor===Array;export const isElement=e=>e instanceof HTMLElement;export const arrSum=e=>e.reduce(((e,t)=>e+(isNum(t)?t:0)),0);export function arrMean(e){Array.isArray(e)||(e=[e]);return(e=e.filter((e=>isNum(e)))).reduce(((e,t)=>e+t),0)/e.length}export function arrStderr(e){Array.isArray(e)||(e=[e]);const t=arrMean(e=e.filter((e=>isNum(e)))),n=e.map((e=>Math.pow(e-t,2))),r=arrSum(n)/e.length;return Math.sqrt(r)/Math.sqrt(e.length)}export function groupAndSummarize(e,t){const{groupBy:n,valuesField:r,labelField:o,sortBy:s}=t,a=s?e.slice().sort(((e,t)=>parseInt(e[s]?.replace(/\D/g,""),10)-parseInt(t[s]?.replace(/\D/g,""),10))):e,l={};a.forEach(((e,t)=>{const s=e[n];if(void 0===s)return;void 0===l[s]&&(l[s]={values:[],labels:[]});const a=e[r],c=o?e[o]:[i?.[t]];Array.isArray(a)?l[s].values.push(...a.filter((e=>null!=e))):null!=a&&l[s].values.push(a),c&&l[s].labels.push(...Array.isArray(c)?c.filter((e=>null!=e)):[c])}));var i=Object.keys(l),c=(e=i.map((e=>l[e].values)),i.map((e=>l[e].labels)));return{labels:i,data:e,content:c}}export function arrayToCsv(e){if(!Array.isArray(e)||0===e.length)return"";return e.map((e=>{Array.isArray(e)||(e=[e]);return e.map((e=>"string"==typeof e?`"${e.replace(/"/g,'""')}"`:"number"==typeof e||"boolean"==typeof e?e.toString():null==e?"":`"${JSON.stringify(e).replace(/"/g,'""')}"`)).join(",")})).join("\n")}export function shuffled(e){return e.map((e=>({r:e,sort:Math.random()}))).sort(((e,t)=>e.sort-t.sort)).map((({r:e})=>e))}export function randInt(e){return Math.floor(Math.random()*e)}export function removeUndefined(e){for(let t in e)void 0===e[t]&&delete e[t]}export function shallowEquals(e,t,n=[]){const r=Object.keys(e).filter((e=>!n.includes(e))),o=Object.keys(t).filter((e=>!n.includes(e)));if(r.length!==o.length)return!1;for(let n of r){let r=e[n];if("object"==typeof r){if(JSON.stringify(r)!==JSON.stringify(t[n]))return!1}else if(r!==t[n])return!1}return!0}export function pad0(e,t=2){return e.toString().padStart(t,"0")}export function getDateTime(e,t,n){let r;r=e?new Date(e):new Date;let o=r.getFullYear()+"-"+pad0(r.getMonth()+1)+"-"+pad0(r.getDate()),s=pad0(r.getHours())+":"+pad0(r.getMinutes());return n&&(s+=":"+pad0(r.getSeconds())),t?o+t+s:[o,s]}export function showMinutes(e){let t=Math.floor(e/1e3);return`${Math.floor(t/60)}:${String(t%60).padStart(2,"0")}`}export function detectBrowser(){const e=navigator.userAgent;return/Opera|OPR/.test(e)?"Opera":/Edg/.test(e)?"Edge":/Chrome/.test(e)?"Chrome":/Safari/.test(e)?"Safari":/Firefox/.test(e)?"Firefox":/MSIE|Trident/.test(e)?"IE":"Unknown"}export const getEl=document.getElementById.bind(document);export function download(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}export const isDisplayed=e=>e?.offsetParent||document.body.contains(e);export const show=e=>e.classList.remove("hidden");export const hide=e=>e.classList.add("hidden");export const hideToggle=e=>e.classList.toggle("hidden");export function newEl(e={},t,n){isStr(e)&&(e={innerHTML:e});const r=document.createElement(e.tag||"div");let o=!1;if(delete e.tag,e.events){for(let t in e.events)r.addEventListener(t,e.events[t]),"click"!=t&&"mousedown"!=t||(o=!0);delete e.events}if(e.style){for(let t in e.style)r.style[t]=e.style[t];delete e.style}for(let t in e)void 0!==r[t]?r[t]=e[t]:r.setAttribute(t,e[t]),"onclick"!=t&&"onmousedown"!=t||(o=!0);return o&&r.classList.add("clickable"),t&&(n?t.prepend(r):t.appendChild(r)),r}export function span(e={},t){return isStr(e)&&(e={innerHTML:e}),e.tag="span",newEl(e,t)}export function button(e={},t){return isStr(e)&&(e={innerHTML:e}),e.tag="button",newEl(e,t)}export function input(e={},t){isStr(e)&&(e={htmlBefore:e});var n={tag:"label"};e.labelClass&&(n.class=e.labelClass),e.labelStyle&&(n.style=e.labelStyle);const r=newEl(n,t);e.tag="input";const o=e.htmlBefore,s=e.htmlAfter;return delete e.labelClass,delete e.labelStyle,delete e.htmlBefore,delete e.htmlAfter,o&&(r.spanBefore=r.appendChild(span({innerHTML:o}))),r.input=r.appendChild(newEl(e)),s&&(r.spanAfter=r.appendChild(span({innerHTML:s}))),r}export function currentUrlWithParams(e){let t=new URL(window.location);t.hash=t.search="";for(let n in e)t.searchParams.append(n,e[n]);return t.href}export function copyToClipboard(e){navigator.clipboard.writeText(e)}export function spinOnce(e){e.style.animation="",e.offsetWidth,e.style.animation="spin 0.5s",setTimeout((()=>e.style.animation=""),500)}export function importStyleSheet(e){const t=document.createElement("link");t.rel="stylesheet",t.href=e,document.head.appendChild(t)}export function addToStyleSheet(e){const t=document.createElement("style");t.textContent=e,document.head.appendChild(t)}