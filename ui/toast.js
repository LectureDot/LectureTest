import{isObj,show,hide,newEl,isDisplayed}from"./common.js";import styles from"./toast.css"with{type:"css"};document.adoptedStyleSheets.push(styles);const toastDiv=newEl({id:"toast",className:"hidden",style:{position:"fixed",zIndex:99999,bottom:"1em",left:"50%",transform:"translate(-50% , 100%)",width:"80%",backgroundColor:"#333",color:"#ccc",padding:"1em",paddingRight:"2em",border:"solid 1px gray",borderRadius:"5px",overflow:"hidden",borderLeft:"8px solid var(--toast-accent)"}},document.body),toastMsg=newEl({tag:"span",style:{whiteSpace:"pre-wrap"}},toastDiv);function closeToast(){window.removeEventListener("mousedown",closeToast),window.removeEventListener("keydown",closeToast),window.removeEventListener("popstate",closeToast),hide(toastDiv),toastDiv.classList.remove("slide-up")}export function toast(t,o,s){if(isDisplayed(toastDiv)&&closeToast(),s?toastDiv.style.setProperty("--toast-accent",s>0?"#4f6":s<-.5?"#f64":"#fe4"):toastDiv.style.setProperty("--toast-accent","gray"),toastMsg.innerHTML=o?o+"\n\n":"",isObj(t))for(let o in t)t[o]&&(toastMsg.innerHTML+=o+" : "+t[o]+"\n");else toastMsg.innerHTML+=t;setTimeout((()=>{window.addEventListener("mousedown",closeToast),window.addEventListener("keydown",closeToast),window.addEventListener("popstate",closeToast),show(toastDiv),toastDiv.classList.add("slide-up")}),200)}export function toastSuccess(t,o){toast(t,o,1)}export function toastWarn(t){toast(t,"Warning",-.1)}export function toastError(t){toast(t,"Error",-1)}