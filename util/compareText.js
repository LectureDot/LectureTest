import{isNum,isStr,isObj}from"../ui/common.js";import{rrToRe,textToRr,checkRr,reToRr}from"../ui/editor/mode-reread.js";export const textPattern=r=>{if(r&&(isStr(r)&&(r={rr:textToRr(r)}),isObj(r))){try{if(!checkRr(r.rr))if(r.re)r.rr=reToRr(r.re);else{if(!r.txt)return;r.rr=textToRr(r.txt)}r.re||(r.re=rrToRe(r.rr))}catch(t){return void console.error("Pattern creation error for",r,"\n",t)}return r}};export function compareText(r,t){if(!t||!r)return;if(isStr(r)||(r=r.toString()),isNum(t)&&(t=t.toString()),!t.re&&!(t=textPattern(t)))return;let e=(t.start?"^":"")+t.re+(t.end?"$":"");return new RegExp(e,"u"+(t.case?"":"i")).test(r)?!t.not:t.not}