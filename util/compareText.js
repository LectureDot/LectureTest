import{isNum,isStr}from"../ui/common.js";import{reindent}from"../indentation.js";import{rrToRe}from"../ui/editor/mode-reread.js";export function compareText(e,r,t={ignoreCase:!0,removeNewlines:!0,removeEmptyLines:!0,reduceWhitespace:!0,trim:!0,standardizeIndent:!1}){if(t.removeNewlines&&(e=e.replace(/\n/g," ")),t.reduceWhitespace&&(e=e.replace(/(?!^)[ \t]+/gm," ")),t.standardizeIndent?e=reindent(e):t.trim&&(e=e.split("\n").map((e=>e.trim())).join("\n")),t.removeEmptyLines&&(e=e.replace(/^\s*$/gm,"")),isNum(r)&&(r=r.toString()),isStr(r))return t.ignoreCase&&(r=r.toLowerCase(),e=e.toLowerCase()),t.removeNewlines&&(r=r.replace(/\n/g," ")),t.reduceWhitespace&&(r=r.replace(/(?!^)[ \t]+/gm," ")),t.standardizeIndent?r=reindent(r):t.trim&&(r=r.split("\n").map((e=>e.trim())).join("\n")),t.removeEmptyLines&&(r=r.replace(/^\s*$/gm,"")),console.log(`"${e}" == "${r}"`),e==r;if(r?.re||r?.rr||r?.txt){r.re||(r.rr||(r.rr=r.txt),r.re=rrToRe(r.rr));let t=r.case?"i":"";r.start&&(r.re="^"+r.re),r.end&&(r.re=r.re+"$");const n=new RegExp(r.re,t);return e.match(n)?!r.not:r.not}console.warn(`${typeof r}: "${e}" == "${r}"`)}